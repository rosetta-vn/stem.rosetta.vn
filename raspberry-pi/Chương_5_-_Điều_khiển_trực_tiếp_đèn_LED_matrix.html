<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<title>Chương 5 - Điều khiển trực tiếp đèn LED matrix</title>
	<meta name='Generator' content='Zim 0.65'>
	<style type='text/css'>
		a          { text-decoration: none      }
		a:hover    { text-decoration: underline }
		a:active   { text-decoration: underline }
		strike     { color: grey                }
		u          { text-decoration: none;
					 background-color: yellow   }
		tt         { color: #2e3436;            }
		pre        { color: #2e3436;
					 margin-left: 20px          }
		h1         { text-decoration: underline;
					 color: #4e9a06; margin-bottom: 0 }
		h2         { color: #4e9a06; margin-bottom: 0 }
		h3         { color: #4e9a06; margin-bottom: 0 }
		h4         { color: #4e9a06; margin-bottom: 0 }
		h5         { color: #4e9a06; margin-bottom: 0 }
		p          { margin-top: 0              }
		span.zim-tag {
			color: #ce5c00;
		}
		div.zim-object {
			border-style:solid;
			border-width:1px;
		}
		.checked-box {list-style-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAANOgAADMQBiN+4gQAAAAd0SU1FB9gKGQ8sMEGsKGkAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAEBUlEQVRIx62V22tdRRTGf7Nn73P2ybntnNOe3NqkPTGgLTVUUZF6QatSLOKTPgqCIqLgQ0H/A1sQQbBYCBb1QfAxiC8tSO1FqHkwJVKtjdTGNraUmObsc9nXmfGh7cGYpM1D5nHWzPetteZb3wg2eB2YqYm4zSadsMtoboiNBH/3TE0awx6j+MRoxoTg/IYRvP19TQrJS0bzhdHGSyKFkLTtjSKwMjyiEz43ynhtP6bdjBCWyFobAf7eT7VhNF/q1FRbjYjmUohlCVPwnB+6FUxMTJipqSmUUhhjEGKd3bMT4ks/Y6oLBK2Yth8hHYtCJXOix7Nf7xLMzc0xOzvLzp078TyPNE3viW3QJPXzhNWbxFFKHCmMhoLn/FHodd48vGfhapdAacXQlkFK5dL6wIUm6fuTZPuvqDQhaMUYYyiVyuQr6rXDexYuAdi3tSv1ZJNs/R/CaszzT+1na88uXFnCEnJVgivBNN8uTJKmHQI/ptOOcXNZzMz9mOqFs90OHpipWcYwlo5P4ebnuOkrvr5wgrH+h3im7y36MzuwRXYZeKha/OhP0EkadFoxQSdGSotedR/+XwMc2XvKdNUFOFqZx6LKZWIiwjgkikNmLp/hm8sH+K1zjFTHXfBYdTi+eJArzXM0GxFxoBDCopLvo/fqEwi1XPkWkGqjFo2TgB1jOYZUKZTS/D1/ncmLh7jon0IbRWoiTi59ymzzJEEQE3cStNZsGxqlfPE57MBbOR8fP3hDGalOO9fq2DlBvmZw8xa2IxACGn6TydlD/O6f5OzSV/zif0cYhLQaEXGkKBbz7Ov/AOlXV1cxgBJRI3fuSTrpTawt18kWIZN1CFuaONI0w0WOXfsI43YIggh/KUSlhqxrMz74AkOZcWBm9QkH+Gw8NDLuITi+m0yzhluSyJzBLcpblUhFxywSRAEtPwQjsKVN30CNh0uvYuOubSHLtN3J0TO1j0pmBNuFbFWRK0gyPRZpktL2I5JQkclKakNlnh54g6ocvevUr/Ai2a7wineEkcJupA3S1Wg0nVZM2E6wbEF5U5G9Q++wI7sfR7h3N8HVNstykBfzH+KJEZwiWD0aIwxCgJ0R1Mu7GXOeJSuK93bZtQIle4D9pUNU5DC5jEsu55AvZakM5NicGyEj8uuz8bUCQgj67QfY671P3vEoeC69gy695U1U7NG7XV0pUwBjDJa1/JJlWWxzHuflzQe5FJ/GsgUVuZ2t8lEkTvfc0aNHb72flBhjVicQQqCUuvM3/M+WDVguWBrMVdDXEGZlBVEUrVCU9d9s5+fnaTQa2PZyPxEIhJaI1EEoZwX4ncynp6fXrmB4eJjR0VFarRbNZnP9P9rt9gohqNVq1Ov1ZbF/AZGev3hLJ2/zAAAAAElFTkSuQmCC)}
		.xchecked-box {list-style-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAANOgAADMQBiN+4gQAAAAd0SU1FB9gKGQ8bDYnDxEwAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAEK0lEQVRIx9WVS2hTWRjHf/eR3CY1nbxMH2YiZRQS6qO13YlMVxY3SnVcuNIBFezGpSADLoQqLu1sHJCqdCFSXFpw4YOCSH3BtFqttTNamabX3DS5bfO6uffMoglja3RGcDMHzuac7/z/53++//cd+L8P6VuCPQYZ8ADNgBd4J31DcDcQs+GnHByRocEDv0kfBSjAOlYCs11Q+gpwDegS8LMJ+3QIK0ATzEhV8Odnz5bzw8P4dJ25aJQ/WlvJ1df/K7hSLtOcTNI+Pk69rpMTgqIQhCDvh1/VSpw79+gRrRMTmLZNezLJJsPg+a5dmOEwQlFqg1sWG16/Jv7sGWXDwBACFQjC9HcwIMONKkGp4PGAJGEDS0IQmZlhnWnye3c3eiyGo6qr3WHbrJ+dJf7gAXI6zSIr72T7/fgzmT4FHnTBsgrQBfYvTU0km5vxz86iADnAm0rRPTWFt7cXZccOJJcLAGHb2K9ekT93jmwmwwdAAFpjI6Ntbfxw5879ag7l6o1sr5eHHR3IsRgeQK/M4sQE+YEB7JcvEY6zAj45SWFgAPPxYwzHoQxIkQjTPT0kIxE+Noj8sexFn4/xnh58iQTeSpHkHAdrbIzi0BCOrmNPTpK/eJHM3bt8sCyKQCiR4NWePWSiUZw1+ZLXJm4pFKLhzBlCsRh2RUXacVgeGaF47RrL58+zcP8+RrmMkCQinZ1EL1zAjERqmkH+tLYl1G3bCJw4QUjT0IA0MJfLMX/5MqmHD0nZNiUgtGULG/r7ccXjINWuWbnmqsuFu7sb/4EDNLlcBIEioNs2KUAFGmMxmk6dQm1tRZI+3xBqEkiShBQOox05Ql1nJ26gvuIUAWiKQnj/ftStW5Fk+YuF+NldsbBA4cYN9KdPmaso8Fc62ZJtk7l1C2t0FGdxESHE1xE4hkHh6lX0oSHSpRIewC/LrPf7CSgKNpCamkI/fZr8pUuIZBIcpyaBunahPp1mub+fDyMjGKUSChCsq6Nh717q9u2jbnSU0uAgRrFIwTThyhUCqRS+hgZKLS1fJvDm87SNjZGcnsYUAjcQ8vsJ9/Xh7u1FDgRQN20iks3iDA+zZFmYhQLqzZtsj8WY3L0baY2Sf55ICCKpFHUzM2SEQAJCHg+hY8fQDh5EDgRWDoRC1J88SePRo2geD0XAcBy8b98Sv3ePYDZbbf2rFQjLIphMsmDbaEBQVQkePox26BCSz7e6i4bDrDt+nGYhmBscpFAskheC4Js3bPR4qHphFYEnlcI7P4/jdqNpGu8TCe4oCsXr1z//F2ga3+/cSfTJE0qmSVYIsKzaOZDcbjKyzFIiwfvt21kMBLA07YsetzWNd+3tLLW0sH5igvT8PH9Go/z44kX+E4LGjg7GDYOcy4XlOEgLC//5P/5LCFzxOPLmzWyIx+m6fduu7v0NVGqyTSycKksAAAAASUVORK5CYII=)}
		.unchecked-box {list-style-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAANOgAADMQBiN+4gQAAAAd0SU1FB9gKGQ8qAt8h3m8AAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAA60lEQVRIx+2VsQqDMBRF70sCLg5OLoKgjk7+lJ/hh+STXBwcnRz8ArMEkrxOFktbaC3tULzTg5e8k5vADXDq70VbobXmvu/hvQczg4heHrJfXxQFuq67blZbMc8zpmlCXddIkgTOuZcBUko45zCOI6y1Nz2xFSEEZFmGOI7fGg4A3nsQEZqmuXOu9jallACAtm3fvmutNaIoAjM/dkBECCF89KCbk4eAb+kEnIAT8EsAM0OIz3hSyrssUvss8t5fg+uIrLXPs0gIgWVZYIyBUurQyYdheO4gz3NUVQVjDNZ1PfSjpWmKsixvehfB9GBZ3NndrgAAAABJRU5ErkJggg==)}
		ul {list-style-image: none}
		/* ul rule needed to reset style for sub-bullets */
	</style>
</head>
<body>

<!-- Header -->
<div class='header'>
	[ <a href='./Chương_4_-_Điều_khiển_trực_tiếp_đèn_LED_7_đoạn.html'>Prev</a> ]

	[ <span class='insen'>Index</span> ]

	[ <a href='./Chương_6_-_Hiển_thị_ra_màn_hình_LCD_16x2.html'>Next</a> ]
</div>

<hr />

<!-- Wiki content -->

<div class='pages'>
	<div class='heading'>
	<h1>Chương 5 - Điều khiển trực tiếp đèn LED matrix <a name='Exploratory:Raspberry Pi:Sách Tự học lập trình điều khiển với Raspberry Pi:Chương 5 - Điều khiển trực tiếp đèn LED matrix'></a></h1>
	</div>

	<div class='content'>
	<p>
Created Friday 27 June 2014
</p>

<p>
<a href="https://www.youtube.com/watch?v=PRwaj-pGJNs" title="https://www.youtube.com/watch?v=PRwaj-pGJNs" class="https">https://www.youtube.com/watch?v=PRwaj-pGJNs</a><br>
Sử dụng LED 5x7, lấy 12 chân GPIO của RPi để điều khiển:<br>
LED pin - RPi GPIO<br>
1 - 17<br>
2 - 4<br>
3 - 22<br>
3 - 10<br>
5 - 9<br>
6 - 11<br>
7 - 18<br>
8 - 23<br>
9 - 24<br>
10 - 25<br>
11 - 8<br>
12 - 7<br>
Chọn chế độ GPIO output cho tất cả các chân đó, rồi điều khiển mỗi chân là high hay low.
</p>

<p>
<a href="http://www.raspberrypi.org/forums/viewtopic.php?f=41&t=38181" title="http://www.raspberrypi.org/forums/viewtopic.php?f=41&amp;t=38181" class="http">http://www.raspberrypi.org/forums/viewtopic.php?f=41&amp;t=38181</a>
</p>

<p>
<a href="http://w8bh.net/contents.htm" title="http://w8bh.net/contents.htm" class="http">http://w8bh.net/contents.htm</a> (cụ thể, tốt)
</p>

<p>
Bài thực hành dùng LED matrix 8x8: :Raspberry Pi:Sách Tự học lập trình điều khiển với Raspberry Pi:Chương 7 - Điều khiển đèn LED matrix qua giao tiếp SPI
</p>

<h2>Linh kiện</h2>

<p>
- LED matrix 5x7
</p>

<br>

<h1>Nội dung</h1>

<br>

<h2>Dẫn nhập (1 trang)</h2>

<p>
<div style='padding-left: 30pt'>
- mục tiêu học ở chương này<br>
- các linh kiện cần thiết<br>
- ý nghĩa của bài học này, có thể phát triển ra những ứng dụng nào
</div>
Đèn LED được dùng nhiều trong thực tế nhờ ưu điểm dễ điều khiển, tiết kiệm năng lượng và có nhiều màu sắc. Để có thể tạo ra các hình ảnh sinh động với đèn LED, người ta thiết kế ra các linh kiện LED ma trận, gồm một ma trận các điểm mà mỗi điểm là một đèn LED. Hầu hết các bảng hiệu quảng cáo có dòng chữ chạy mà ta thấy trên đường phố là dựa vào các LED ma trận. Mỗi đèn LED ma trận gồm rất nhiều điểm có thể điều khiển độc lập, ví dụ có loại gồm 7 hàng và 5 cột, tức là có 7x5=35 điểm, khi ta điều khiển được mỗi điểm ở trạng thái "on" hay "off" thì sự tổ hợp của chúng giúp ta tạo ra được rất nhiều hình, ví dụ có thể tạo hình các chữ cái, hoặc khi ghép nhiều LED ma trận cạnh nhau sẽ tạo được hình ảnh hoạt hình giống như trên ti vi.<br>
Để điều khiển được đồng thời sự sáng/tối cho các điểm LED trong một LED ma trận, ta cần học kỹ thuật điều khiển xoay vòng để có thể tiết kiệm số chân của bộ xử lý. Tưởng tượng nếu 35 đèn LED nhỏ được thiết kế kiểu nối một cực chung như đèn LED 7 đoạn, ta sẽ cần 35 chân nối để điều khiển chúng, như vậy là quá nhiều đối với các vi điều khiển. Do đó, mạch điện trong LED ma trận được thiết kế kiểu khác, các đèn LED được gắn ở các mắt lưới trong một mạch điện mà khi các đầu nối ở mỗi hàng được nối vào cực dương còn đầu nối mỗi cột được nối vào cực âm thì sẽ cho dòng điện chạy qua đèn LED ở mắt lưới giao giữa hàng và cột đó, như trong hình (to do: chỉ đến hình minh họa mạch trong LED matrix). Để điều khiển một điểm LED, ta điều khiển các chân nối hàng và cột ứng với nó, như vậy đối với một LED ma trận có 7 hàng 5 cột thì ta chỉ cần sử dụng 7+5=12 chân điều khiển của bộ xử lý. Tuy nhiên, một vấn đề nảy sinh là khi ta kéo điện áp ở hai hàng lên cực dương và hạ điện áp ở hai cột xuống cực âm, thì cùng lúc có 4 mắt lưới giữa 2 hàng và 2 cột đó sẽ sáng đèn, như vậy ta không làm được tổ hợp kiểu như 3 trong 4 đèn đó sáng trong khi đèn còn lại phải tối. Khi có nhiều hàng và nhiều cột hơn thì sự phụ thuộc nhau còn phức tạp hơn nữa. <br>
Để giải quyết vấn đề này, người ta dùng kỹ thuật điều khiển xoay vòng, hay thường gọi là "quét LED". Người ta không điều khiển đồng thời các hàng mà tại mỗi thời điểm chỉ điều khiển một hàng và giữ trạng thái đó trong thời gian rất ngắn (cỡ vài mili giây), rồi chuyển sang hàng kế tiếp. Như vậy ở mỗi thời điểm chỉ có các đèn LED trên một hàng có thể sáng, và vì ta xoay vòng các hàng nên các đèn LED sáng và tắt rất nhanh, trong vòng một giây mỗi đèn LED có thể được chớp lên hàng chục đến hàng trăm lần. Do mắt người không thể theo kịp tốc độ chớp đó mà chỉ có thể bắt được hình ảnh khoảng 24 lần mỗi giây, nên khi các đèn LED chớp nhanh hơn tốc độ đó thì mắt người sẽ xem như là đèn đó sáng liên tục. Vậy là tuy ở từng thời điểm rất ngắn ta chỉ bật các đèn LED trên một hàng, nhưng nhờ sự xoay vòng rất nhanh mà mắt người xem sẽ nhìn thấy các đèn LED ở các hàng khác cũng vẫn sáng, nhờ đó ta tạo được hình ảnh có sử dụng các điểm LED trên toàn bộ ma trận. (Nói thêm là đối với màn hình máy vi tính mà bạn hay dùng, các điểm ảnh cũng được điều khiển theo nguyên lý này, với tần số quét khoảng 60-100Hz, tức là xoay vòng 60 đến 100 lần mỗi giây).<br>
Chương này sẽ giúp bạn đọc hiểu nguyên lý mắc mạch điện tử để điều khiển một ma trận LED, sử dụng một linh kiện LED ma trận tích hợp để minh họa, và lập trình dùng thủ thuật quét LED bằng cách tạo vòng lặp trong phần mềm cùng với hàm tạo độ trễ thời gian. Khi nắm được nguyên lý điều khiển cho một LED ma trận tích hợp, bạn đọc có thể tự thiết kế, chế tạo các mạch điện tử với đèn LED phối hợp thành ma trận nhiều hàng, nhiều cột hơn, hiển thị chữ cái với độ lệch theo thời gian để tiến đến làm được dòng chữ chạy giống như các bảng quảng cáo sinh động thường thấy trong thực tế.
</p>

<br>

<h2>Kết nối mạch điện tử (1 trang - hình ảnh)</h2>

<p>
<div style='padding-left: 30pt'>
- hình sơ đồ nối dây, minh họa mạch kiểu phim âm bản (lấy từ trang web project của nước ngoài như Adafruit)<br>
- hình chụp mạch &amp; breadboard đã kết nối<br>
- coi như khi có sơ đồ nối dây là người ta làm theo được, không cần hướng dẫn từng bước
</div>
</p>

<br>

<h2>Chuẩn bị phần mềm (1 trang)</h2>

<p>
<div style='padding-left: 30pt'>
- quy trình từ lúc bật power đến khi sẵn sàng nhập lệnh:<br>
- liệt kê các bước bằng text<br>
- chụp hình màn hình khi chọn menu để vào môi trường nhập lệnh (console)
</div>
</p>

<br>

<h2>Code mẫu (1 trang)</h2>

<p>
 - nhập code và xem kết quả:<br>
<div style='padding-left: 30pt'>
- nhập các lệnh cấu hình phần cứng<br>
- nhập các lệnh điều khiển
</div>
</p>

<br>

<h2>Giải thích các lệnh (3 trang )</h2>

<p>
<div style='padding-left: 30pt'>
- sẽ đưa các lệnh vào file Python để giải thích bằng chế độ comment đằng sau code<br>
- thêm một phần giải thích việc nhập code kiểu interactive (nhập, gõ enter, thấy kết quả ngay, không có biên dịch hay phải nạp vào chip)<br>
- (dự kiến khối lệnh ở mỗi bài trong vòng 20 - 40 dòng)
</div>
</p>

<br>

<h2>Bài thực hành thêm (1 trang)</h2>

<p>
<div style='padding-left: 30pt'>
- thêm một số gợi ý để người học tự thực hành (ví dụ: bài học bật tắt 1 LED, thêm bài tập bật tắt tuần tự 2 LED)
</div>
</p>

	</div>

	<br />

	<div class='page-footer'>
		<b>Backlinks:</b>

		<a href='../raspberry-pi.html'>Exploratory:Raspberry Pi:Sách Tự học lập trình điều khiển với Raspberry Pi</a>

		<br /><br />

	</div>

	

</div>
<!-- Start of StatCounter Code for Default Guide -->
<br>
<strong>Số lượt truy cập:</strong>
<script type="text/javascript">
var sc_project=11092315; 
var sc_invisible=0; 
var sc_security="c62d86f6"; 
var scJsHost = (("https:" == document.location.protocol) ?
"https://secure." : "http://www.");
document.write("<sc"+"ript type='text/javascript' src='" +
scJsHost+
"statcounter.com/counter/counter.js'></"+"script>");
</script>
<noscript><div class="statcounter"><a title="site stats"
href="http://statcounter.com/" target="_blank"><img
class="statcounter"
src="//c.statcounter.com/11092315/0/c62d86f6/0/" alt="site
stats"></a></div></noscript>
<!-- End of StatCounter Code for Default Guide -->
</body>
</html>
